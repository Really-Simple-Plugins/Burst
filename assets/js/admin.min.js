jQuery(document).ready(function(a){function g(){var b,c=!0;a(".condition-check").each(function(e){var f="burst_"+a(this).data("condition-question"),l="AND";if(void 0!=f){e=a(this).data("condition-answer");var d=a(this).find("input[type=checkbox]");d.length||(d=a(this).find("input"));d.length||(d=a(this).find("textarea"));d.length||(d=a(this).find("select"));d.length&&d[0].hasAttribute("required")&&d.addClass("is-required");e+="";-1!==e.indexOf("NOT ")?(e=e.replace("NOT ",""),c=!1):c=!0;var p=[];-1!==
e.indexOf(" OR ")?(p=e.split(" OR "),l="OR"):p=[e];var m=a(this),n=!1;p.forEach(function(h){b=k(f);a("select[name="+f+"]").length&&(b=Array(a("select[name="+f+"]").val()));a("input[name='"+f+"["+h+"]']").length&&(n=a("input[name='"+f+"["+h+"]']").is(":checked")?!0:!1,b=[]);c?n||-1!=b.indexOf(h)||b==h?(m.removeClass("hidden"),d.hasClass("is-required")&&d.prop("required",!0),"OR"===l&&(n=!0)):(m.addClass("hidden"),d.hasClass("is-required")&&d.prop("required",!1)):n||-1!=b.indexOf(h)||b==h?(m.addClass("hidden"),
d.hasClass("is-required")&&d.prop("required",!1)):(m.removeClass("hidden"),d.hasClass("is-required")&&d.prop("required",!0))})}})}function k(b){if("text"==a("input[name="+b+"]").attr("type"))return a("input[name^="+b+"]").val();var c=[];a("input[name="+b+"]:checked").each(function(){c[c.length]=a(this).val()});return c}function q(){var b=a(".burst-select2-page-field").attr("name")+"_query_settings";console.log(b);a(".burst-select2-page-field").select2({ajax:{url:ajaxurl,dataType:"json",delay:250,
data:function(c){return{q:c.term,query_settings:window[b],action:"burst_get_posts"}},processResults:function(c){var e=[];c&&(a.each(c,function(f,l){e.push({id:l[0],text:l[1]})}),console.log(e));return{results:e}},cache:!0},minimumInputLength:2,debug:!0,width:"100%"})}g();a("input").change(function(b){g()});a("select").change(function(b){g()});a("textarea").change(function(b){g()});a(".burst-select2-page-field").length&&q();a(document).on("click",".burst-experiment-action",function(b){b.preventDefault();
var c=a(this);c.closest("tr").css("background-color","red");b=c.data("id");var e=c.data("action");a.ajax({type:"POST",url:burst.ajaxurl,dataType:"json",data:{action:"burst_experiment_action",experiment_id:b,type:e},success:function(f){f.success&&c.closest("tr").remove()}})})});function burstLocalizeString(a){var g=burst.strings,k;for(k in g)g.hasOwnProperty(k)&&(a=a.replaceAll(k,g[k]));return a};